(this["webpackJsonpradio-plato"]=this["webpackJsonpradio-plato"]||[]).push([[0],{57:function(e,t,a){e.exports=a(88)},62:function(e,t,a){},63:function(e,t,a){},65:function(e,t,a){},66:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),o=a(35),l=a.n(o),i=(a(62),a(7)),s=a(13),u=a(5),m=a(36),h=a.n(m),p=a(37),f=a.n(p),v=a(38),d=a.n(v),y=a(39),b=a.n(y),k=a(40),g=a.n(k),E=a(41),w=a.n(E),S=a(42),N=a.n(S),j=a(43),C=a.n(j),O=a(44),x=a.n(O),T=a(45),M=a.n(T),P=a(46),L=a.n(P);!function(e){e.Castbox="castbox",e.Itunes="itunes",e.Mixcloud="mixcloud",e.Spotify="spotify",e.Facebook="facebook",e.Vk="vk",e.Email="email",e.Instagram="instagram",e.Telegram="telegram",e.GooglePlay="googlePlay"}(n||(n={}));a(63);var I=new Map([[n.Mixcloud,f.a],[n.Spotify,d.a],[n.Itunes,b.a],[n.Castbox,g.a],[n.Facebook,w.a],[n.Vk,N.a],[n.Email,C.a],[n.Instagram,x.a],[n.Telegram,M.a],[n.GooglePlay,L.a]]);var D,R=function(e){var t=e.socialLinks,a=Object.entries(t).map((function(e){return function(e,t,a){return t&&a?c.a.createElement("a",{className:"social-link",target:"_blank",key:e,href:t,rel:"noopener noreferrer"},c.a.createElement(u.Icon,{className:"social-icon",icon:a,width:"1.5em",color:"white"})):null}("".concat(e[0],"-").concat((new Date).getTime()),e[1],I.get(e[0]))}));return c.a.createElement("div",{className:"social-icons"},a)},A=a(8),F=a(9),H=a(12),z=a(11),V=a(17),B=a(47),G=a.n(B),J=a(48),_=a.n(J),U=a(24),W=a.n(U),q=a(49),K=a(90),Q={playing:!1,muted:!1,volume:1},X=new(function(){function e(t){Object(A.a)(this,e),this.playerState=void 0,this.track="",this.playerStateSubject=void 0,this.trackNameSubject=void 0,this.playerState=t,this.playerStateSubject=new K.a,this.trackNameSubject=new K.a,this.updateTrackName(),setInterval(this.updateTrackName.bind(this),15e3)}return Object(F.a)(e,[{key:"subscribeOnPlayerStateChanges",value:function(e){return this.playerStateSubject.subscribe((function(t){return e(t)}))}},{key:"subscribeOnTrackNameChanges",value:function(e){return this.trackNameSubject.subscribe((function(t){return e(t)}))}},{key:"updateTrackName",value:function(){var e=Object(q.a)(W.a.mark((function e(){var t,a,n;return W.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://radioplato.radioca.st/status-json.xsl");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,(n=a.icestats.source[0].title)!==this.track&&(this.track=n,this.trackNameSubject.next(this.track));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"playing",set:function(e){this.playerState.playing=e,this.playerStateSubject.next(this.playerState)},get:function(){return this.playerState.playing}},{key:"volume",set:function(e){this.playerState.volume=e,this.playerStateSubject.next(this.playerState)},get:function(){return this.playerState.volume}},{key:"muted",set:function(e){this.playerState.muted=e,this.playerStateSubject.next(this.playerState)},get:function(){return this.playerState.muted}},{key:"trackName",get:function(){return this.track}}]),e}())(Q);!function(e){e.Main="main",e.Header="header"}(D||(D={}));a(65);var Y=function(e){var t=e.playerType,a=Object(r.useState)(X.playing),n=Object(V.a)(a,2),o=n[0],l=n[1],i=function(e){var a=t===D.Main?35:10;return c.a.createElement(u.Icon,{icon:e,width:a,height:a})};return c.a.createElement("button",{className:"play-button",onClick:function(){X.playing=!X.playing,l(X.playing)}},i(o?_.a:G.a))},Z=a(52),$=a(50),ee=a.n($),te=a(51),ae=a.n(te),ne=(a(66),c.a.createElement(u.Icon,{icon:ee.a,width:16,height:16,color:"#ffffff"})),re=c.a.createElement(u.Icon,{icon:ae.a,width:16,height:16,color:"#ffffff"});var ce=function(){var e=Object(r.useState)(X.muted),t=Object(V.a)(e,2),a=t[0],n=t[1];return c.a.createElement("div",{className:"volume-controls"},c.a.createElement("button",{className:"volume-mode-button",onClick:function(){X.muted=!X.muted,n(X.muted)}},a?ne:re),c.a.createElement(Z.a,{className:"horizontal-slider",thumbClassName:"thumb",trackClassName:"track",defaultValue:function(){var e=100*X.volume;return Math.trunc(e)}(),onChange:function(e){return function(e){X.volume=e/100}(e)}}))},oe=(a(69),function(e){Object(H.a)(a,e);var t=Object(z.a)(a);function a(){var e;Object(A.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={trackName:""},e.subscription=null,e}return Object(F.a)(a,[{key:"componentDidMount",value:function(){this.subscribeOnPlayerStateChange(),this.setState({trackName:X.trackName})}},{key:"subscribeOnPlayerStateChange",value:function(){var e=this;this.subscription=X.subscribeOnTrackNameChanges((function(t){return e.setState({trackName:t})}))}},{key:"renderMainPlayer",value:function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"controls-container"},c.a.createElement(Y,{playerType:this.props.playerType}),c.a.createElement(ce,null)),c.a.createElement("p",{className:"onair"},"onair"),c.a.createElement("p",{className:"track-title"},e))}},{key:"renderHeaderPlayer",value:function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement(Y,{playerType:this.props.playerType}),c.a.createElement("div",{className:"track-title"},c.a.createElement("p",null,e)),c.a.createElement(ce,null))}},{key:"renderPlayer",value:function(){var e=this.state.trackName;return this.isMainPlayer?this.renderMainPlayer(e):this.renderHeaderPlayer(e)}},{key:"render",value:function(){return c.a.createElement("div",{className:this.className},this.renderPlayer())}},{key:"isMainPlayer",get:function(){return this.props.playerType===D.Main}},{key:"className",get:function(){return"".concat(this.props.playerType,"-player")}}]),a}(r.Component)),le=(a(70),{mixcloud:"https://www.mixcloud.com/radioplato/",facebook:"https://www.facebook.com/radioplato.by/",vk:"https://vk.com/radioplato",email:"mailto:hey@radioplato.by",instagram:"https://www.instagram.com/radio_plato/",telegram:"https://t.me/radioplato",googlePlay:"https://play.google.com/store/apps/details?id=com.radioplato"});var ie=Object(s.f)((function(){return c.a.createElement("header",{className:"header-container"},c.a.createElement(i.b,{to:"/",className:"logo-text"},"Radio Plato"),c.a.createElement("div",{className:"social-container"},c.a.createElement(s.c,null,c.a.createElement(s.a,{exact:!0,path:"/",render:function(e){return c.a.createElement(R,Object.assign({},e,{socialLinks:le}))}}),c.a.createElement(s.a,{path:"/",render:function(e){return c.a.createElement(oe,Object.assign({},e,{playerType:D.Header}))}})),c.a.createElement("p",{className:"donate"},"Donate"),c.a.createElement("div",{className:"search-icon"},c.a.createElement(u.Icon,{icon:h.a,width:"1.8em",color:"white"}))))})),se=a(55),ue=a.n(se),me=(a(74),["News","Shows","Schedule","About"]);var he=function(e){var t=e.menuRef,a=e.wrapperRef,n=e.toggleMenu;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"wrapper",ref:a,onClick:n}),c.a.createElement("nav",{ref:t},c.a.createElement("div",{className:"close-button-container"},c.a.createElement("button",{className:"close-button",onClick:n},c.a.createElement(u.Icon,{icon:ue.a,width:48,height:48}))),c.a.createElement("div",{className:"menu-items-container"},c.a.createElement("ul",{className:"menu-items"},me.map((function(e){return function(e){var t="/".concat(e.toLowerCase());return c.a.createElement("li",{className:"menu-item",key:e},c.a.createElement(i.b,{to:t,onClick:n},e))}(e)}))))))};a(75);var pe=function(){var e=c.a.createRef(),t=c.a.createRef(),a=function(){var a,n;null===(a=t.current)||void 0===a||a.classList.toggle("wrapper-show"),null===(n=e.current)||void 0===n||n.classList.toggle("menu-open")};return c.a.createElement(c.a.Fragment,null,c.a.createElement(he,{menuRef:e,wrapperRef:t,toggleMenu:a}),c.a.createElement("div",{className:"menuButton",onClick:a},c.a.createElement("p",{className:"label"},"menu")))};a(76);var fe=function(e){var t=e.showCard,a=t.excerpt,n=t.showCover,r=t.slug,o=t.title,l="/shows/".concat(r);return c.a.createElement(i.b,{to:l},c.a.createElement("div",{className:"show-card"},c.a.createElement("img",{src:n.url,loading:"lazy",alt:n.alternativeText}),c.a.createElement("h2",null,o),c.a.createElement("p",null,a)))},ve="https://radioplato-api.herokuapp.com",de=(a(77),function(e){Object(H.a)(a,e);var t=Object(z.a)(a);function a(){var e;Object(A.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={showCards:[]},e}return Object(F.a)(a,[{key:"parseShowCard",value:function(e){return{excerpt:e.Excerpt,showCover:{alternativeText:e.ShowCover.alternativeText,caption:e.ShowCover.caption,url:e.ShowCover.url},slug:e.Slug,title:e.Title}}},{key:"fetchShows",value:function(){var e=this;fetch("".concat(ve,"/shows")).then((function(e){return e.json()})).then((function(t){return t.map((function(t){return e.parseShowCard(t)}))})).then((function(t){return e.setState({showCards:t})}))}},{key:"renderShowCards",value:function(e){return e.map((function(e){return c.a.createElement(fe,{key:e.slug,showCard:e})}))}},{key:"componentDidMount",value:function(){this.fetchShows()}},{key:"render",value:function(){var e=this.state.showCards;return c.a.createElement("div",{className:"show-list"},c.a.createElement("h1",null,"Shows"),c.a.createElement("div",{className:"show-cards"},this.renderShowCards(e)))}}]),a}(r.Component)),ye=(a(78),function(e){Object(H.a)(a,e);var t=Object(z.a)(a);function a(){var e;Object(A.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={show:null},e}return Object(F.a)(a,[{key:"parseShow",value:function(e){return e?{description:e.Description,showCover:{alternativeText:e.ShowCover.alternativeText,caption:e.ShowCover.caption,url:e.ShowCover.url},title:e.Title,showLinks:{mixcloud:e.ShowLink.mixcloud,spotify:e.ShowLink.spotify,itunes:e.ShowLink.itunes,castbox:e.ShowLink.castbox,facebook:e.ShowLink.facebook,vk:e.ShowLink.vk,instagram:e.ShowLink.instagram,telegram:e.ShowLink.telegram}}:null}},{key:"fetchShow",value:function(){var e=this,t=this.props.slug;fetch("".concat(ve,"/shows?Slug=").concat(t)).then((function(e){return e.json()})).then((function(t){return e.parseShow(t[0])})).then((function(t){return e.setState({show:t})}))}},{key:"componentDidMount",value:function(){this.fetchShow()}},{key:"render",value:function(){var e=this.state.show,t=e?e.showCover.url:"";return e?c.a.createElement("article",null,c.a.createElement("div",{className:"information"},c.a.createElement("h1",null,e.title),c.a.createElement("p",null,e.description),c.a.createElement(R,{socialLinks:e.showLinks})),c.a.createElement("div",{className:"image"},c.a.createElement("img",{src:t,loading:"lazy",alt:e.showCover.alternativeText}))):null}}]),a}(r.Component));a(79);var be=Object(s.f)((function(){return c.a.createElement(s.c,null,c.a.createElement(s.a,{exact:!0,path:"/schedule",component:function(){return c.a.createElement("div",null,"/schedule")}}),c.a.createElement(s.a,{exact:!0,path:"/shows",component:de}),c.a.createElement(s.a,{path:"".concat("/shows","/:slug"),component:function(e){return c.a.createElement(ye,{slug:e.match.params.slug})}}),c.a.createElement(s.a,{exact:!0,path:"/news",component:function(){return c.a.createElement("div",null,"/news")}}))}));a(80);var ke=Object(s.f)((function(){return c.a.createElement("main",null,c.a.createElement(pe,null),c.a.createElement(s.c,null,c.a.createElement(s.a,{exact:!0,path:"/",render:function(e){return c.a.createElement(oe,Object.assign({},e,{playerType:D.Main}))}})),c.a.createElement(be,null))})),ge=a(56),Ee=a.n(ge),we=(a(86),function(e){Object(H.a)(a,e);var t=Object(z.a)(a);function a(){var e;Object(A.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state=Q,e.subscription=null,e}return Object(F.a)(a,[{key:"componentDidMount",value:function(){this.subscribeOnPlayerStateChange()}},{key:"subscribeOnPlayerStateChange",value:function(){var e=this;this.subscription=X.subscribeOnPlayerStateChanges((function(t){return e.setState(t)}))}},{key:"componentWillUnmount",value:function(){var e;null===(e=this.subscription)||void 0===e||e.unsubscribe()}},{key:"render",value:function(){var e=this.state,t=e.playing,a=e.muted,n=e.volume;return c.a.createElement("div",{className:"audio"},c.a.createElement(Ee.a,{url:"https://radioplato.radioca.st/stream",playing:t,muted:a,volume:n,config:{file:{forceAudio:!0}}}))}}]),a}(r.Component));a(87);var Se=function(){return c.a.createElement(i.a,null,c.a.createElement(ie,null),c.a.createElement(ke,null),c.a.createElement(we,null))};l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(Se,null)),document.getElementById("root"))}},[[57,1,2]]]);
//# sourceMappingURL=main.83da70dd.chunk.js.map