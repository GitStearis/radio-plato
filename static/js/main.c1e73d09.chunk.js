(this["webpackJsonpradio-plato"]=this["webpackJsonpradio-plato"]||[]).push([[0],{61:function(e,t,a){e.exports=a(97)},66:function(e,t,a){},67:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},86:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){},97:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),i=a(39),l=a.n(i),o=(a(66),a(11)),s=a(13),u=a(9),m=a(40),h=a.n(m),d=a(41),p=a.n(d),f=a(42),y=a.n(f),v=a(43),E=a.n(v),k=a(44),w=a.n(k),b=a(45),g=a.n(b),S=a(46),N=a.n(S),j=a(47),O=a.n(j),T=a(48),C=a.n(T),x=a(49),D=a.n(x),M=a(50),P=a.n(M);!function(e){e.Castbox="castbox",e.Itunes="itunes",e.Mixcloud="mixcloud",e.Spotify="spotify",e.Facebook="facebook",e.Vk="vk",e.Email="email",e.Instagram="instagram",e.Telegram="telegram",e.GooglePlay="googlePlay"}(n||(n={}));a(67);var L=new Map([[n.Mixcloud,p.a],[n.Spotify,y.a],[n.Itunes,E.a],[n.Castbox,w.a],[n.Facebook,g.a],[n.Vk,N.a],[n.Email,O.a],[n.Instagram,C.a],[n.Telegram,D.a],[n.GooglePlay,P.a]]);var A,I=function(e){var t=e.socialLinks,a=Object.entries(t).map((function(e){return function(e,t,a){return t&&a?c.a.createElement("a",{className:"social-link",target:"_blank",key:e,href:t,rel:"noopener noreferrer"},c.a.createElement(u.Icon,{className:"social-icon",icon:a,width:"1.5em",color:"white"})):null}("".concat(e[0],"-").concat((new Date).getTime()),e[1],L.get(e[0]))}));return c.a.createElement("div",{className:"social-icons"},a)},W=a(2),B=a(3),F=a(5),R=a(4),H=a(17),z=a(51),U=a.n(z),V=a(52),_=a.n(V),G=a(14),J=a.n(G),q=a(20),K=a(99),Q={playing:!1,muted:!1,volume:1},X=new(function(){function e(t){Object(W.a)(this,e),this.playerState=void 0,this.track="",this.playerStateSubject=void 0,this.trackNameSubject=void 0,this.playerState=t,this.playerStateSubject=new K.a,this.trackNameSubject=new K.a,this.updateTrackName(),setInterval(this.updateTrackName.bind(this),15e3)}return Object(B.a)(e,[{key:"subscribeOnPlayerStateChanges",value:function(e){return this.playerStateSubject.subscribe((function(t){return e(t)}))}},{key:"subscribeOnTrackNameChanges",value:function(e){return this.trackNameSubject.subscribe((function(t){return e(t)}))}},{key:"updateTrackName",value:function(){var e=Object(q.a)(J.a.mark((function e(){var t,a,n;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("https://radioplato.radioca.st/status-json.xsl");case 2:return t=e.sent,e.next=5,t.json();case 5:a=e.sent,(n=a.icestats.source[0].title)!==this.track&&(this.track=n,this.trackNameSubject.next(this.track));case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"playing",set:function(e){this.playerState.playing=e,this.playerStateSubject.next(this.playerState)},get:function(){return this.playerState.playing}},{key:"volume",set:function(e){this.playerState.volume=e,this.playerStateSubject.next(this.playerState)},get:function(){return this.playerState.volume}},{key:"muted",set:function(e){this.playerState.muted=e,this.playerStateSubject.next(this.playerState)},get:function(){return this.playerState.muted}},{key:"trackName",get:function(){return this.track}}]),e}())(Q);!function(e){e.Main="main",e.Header="header"}(A||(A={}));a(69);var Y=function(e){var t=e.playerType,a=Object(r.useState)(X.playing),n=Object(H.a)(a,2),i=n[0],l=n[1],o=function(e){var a=t===A.Main?35:10;return c.a.createElement(u.Icon,{icon:e,width:a,height:a})};return c.a.createElement("button",{className:"play-button",onClick:function(){X.playing=!X.playing,l(X.playing)}},o(i?_.a:U.a))},Z=a(55),$=a(53),ee=a.n($),te=a(54),ae=a.n(te),ne=(a(70),c.a.createElement(u.Icon,{icon:ee.a,width:16,height:16,color:"#ffffff"})),re=c.a.createElement(u.Icon,{icon:ae.a,width:16,height:16,color:"#ffffff"});var ce=function(){var e=Object(r.useState)(X.muted),t=Object(H.a)(e,2),a=t[0],n=t[1];return c.a.createElement("div",{className:"volume-controls"},c.a.createElement("button",{className:"volume-mode-button",onClick:function(){X.muted=!X.muted,n(X.muted)}},a?ne:re),c.a.createElement(Z.a,{className:"horizontal-slider",thumbClassName:"thumb",trackClassName:"track",defaultValue:function(){var e=100*X.volume;return Math.trunc(e)}(),onChange:function(e){return function(e){X.volume=e/100}(e)}}))},ie=(a(73),function(e){Object(F.a)(a,e);var t=Object(R.a)(a);function a(){var e;Object(W.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={trackName:""},e.subscription=null,e}return Object(B.a)(a,[{key:"componentDidMount",value:function(){this.subscribeOnPlayerStateChange(),this.setState({trackName:X.trackName})}},{key:"subscribeOnPlayerStateChange",value:function(){var e=this;this.subscription=X.subscribeOnTrackNameChanges((function(t){return e.setState({trackName:t})}))}},{key:"renderMainPlayer",value:function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"controls-container"},c.a.createElement(Y,{playerType:this.props.playerType}),c.a.createElement(ce,null)),c.a.createElement("p",{className:"onair"},"onair"),c.a.createElement("p",{className:"track-title"},e))}},{key:"renderHeaderPlayer",value:function(e){return c.a.createElement(c.a.Fragment,null,c.a.createElement(Y,{playerType:this.props.playerType}),c.a.createElement("div",{className:"track-title"},c.a.createElement("p",null,e)),c.a.createElement(ce,null))}},{key:"renderPlayer",value:function(){var e=this.state.trackName;return this.isMainPlayer?this.renderMainPlayer(e):this.renderHeaderPlayer(e)}},{key:"render",value:function(){return c.a.createElement("div",{className:this.className},this.renderPlayer())}},{key:"isMainPlayer",get:function(){return this.props.playerType===A.Main}},{key:"className",get:function(){return"".concat(this.props.playerType,"-player")}}]),a}(r.Component)),le=(a(74),{mixcloud:"https://www.mixcloud.com/radioplato/",facebook:"https://www.facebook.com/radioplato.by/",vk:"https://vk.com/radioplato",email:"mailto:hey@radioplato.by",instagram:"https://www.instagram.com/radio_plato/",telegram:"https://t.me/radioplato",googlePlay:"https://play.google.com/store/apps/details?id=com.radioplato"});var oe=Object(s.f)((function(){return c.a.createElement("header",{className:"header-container"},c.a.createElement(o.b,{to:"/",className:"logo-text"},"Radio Plato"),c.a.createElement("div",{className:"social-container"},c.a.createElement(s.c,null,c.a.createElement(s.a,{exact:!0,path:"/",render:function(e){return c.a.createElement(I,Object.assign({},e,{socialLinks:le}))}}),c.a.createElement(s.a,{path:"/",render:function(e){return c.a.createElement(ie,Object.assign({},e,{playerType:A.Header}))}})),c.a.createElement("p",{className:"donate"},"Donate"),c.a.createElement("div",{className:"search-icon"},c.a.createElement(u.Icon,{icon:h.a,width:"1.8em",color:"white"}))))})),se=a(58),ue=a.n(se),me=(a(78),["News","Shows","Schedule","About"]);var he=function(e){var t=e.menuRef,a=e.wrapperRef,n=e.toggleMenu;return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"wrapper",ref:a,onClick:n}),c.a.createElement("nav",{ref:t},c.a.createElement("div",{className:"close-button-container"},c.a.createElement("button",{className:"close-button",onClick:n},c.a.createElement(u.Icon,{icon:ue.a,width:48,height:48}))),c.a.createElement("div",{className:"menu-items-container"},c.a.createElement("ul",{className:"menu-items"},me.map((function(e){return function(e){var t="/".concat(e.toLowerCase());return c.a.createElement("li",{className:"menu-item",key:e},c.a.createElement(o.b,{to:t,onClick:n},e))}(e)}))))))};a(79);var de=function(){var e=c.a.createRef(),t=c.a.createRef(),a=function(){var a,n;null===(a=t.current)||void 0===a||a.classList.toggle("wrapper-show"),null===(n=e.current)||void 0===n||n.classList.toggle("menu-open")};return c.a.createElement(c.a.Fragment,null,c.a.createElement(he,{menuRef:e,wrapperRef:t,toggleMenu:a}),c.a.createElement("div",{className:"menuButton",onClick:a},c.a.createElement("p",{className:"label"},"menu")))};a(80);var pe=function(e){var t=e.showCard,a=t.excerpt,n=t.showCover,r=t.slug,i=t.title,l="/shows/".concat(r);return c.a.createElement(o.b,{to:l},c.a.createElement("div",{className:"show-card"},c.a.createElement("img",{src:n.url,loading:"lazy",alt:n.alternativeText}),c.a.createElement("h2",null,i),c.a.createElement("p",null,a)))},fe="https://radioplato-api.herokuapp.com",ye=(a(81),function(e){Object(F.a)(a,e);var t=Object(R.a)(a);function a(){var e;Object(W.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={showCards:[]},e}return Object(B.a)(a,[{key:"parseShowCard",value:function(e){return{excerpt:e.Excerpt,showCover:{alternativeText:e.ShowCover.alternativeText,caption:e.ShowCover.caption,url:e.ShowCover.url},slug:e.Slug,title:e.Title}}},{key:"fetchShows",value:function(){var e=this;fetch("".concat(fe,"/shows")).then((function(e){return e.json()})).then((function(t){return t.map((function(t){return e.parseShowCard(t)}))})).then((function(t){return e.setState({showCards:t})}))}},{key:"renderShowCards",value:function(e){return e.map((function(e){return c.a.createElement(pe,{key:e.slug,showCard:e})}))}},{key:"componentDidMount",value:function(){this.fetchShows()}},{key:"render",value:function(){var e=this.state.showCards;return c.a.createElement("div",{className:"show-list"},c.a.createElement("h1",null,"Shows"),c.a.createElement("div",{className:"show-cards"},this.renderShowCards(e)))}}]),a}(r.Component)),ve=(a(82),function(e){Object(F.a)(a,e);var t=Object(R.a)(a);function a(){var e;Object(W.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={showEpisodes:[]},e}return Object(B.a)(a,[{key:"parseShowEpisode",value:function(e){return{title:e.name,image:e.pictures["1024wx1024h"],url:e.url,date:e.created_time,slug:e.slug}}},{key:"parseShowEpisodes",value:function(e){var t=this;return e&&e.data&&e.data.length?e.data.map((function(e){return t.parseShowEpisode(e)})):null}},{key:"fetchPlaylist",value:function(){var e=this,t=this.props.slug;fetch("https://api.mixcloud.com/radioplato/playlists/".concat(t,"/cloudcasts/")).then((function(e){return e.json()})).then((function(t){var a;return null===(a=e.parseShowEpisodes(t))||void 0===a?void 0:a.reverse().slice(0,9)})).then((function(t){return e.setState({showEpisodes:t})}))}},{key:"renderShowEpisode",value:function(e){var t="".concat(e.slug,"-").concat((new Date).getTime()),a=new Date(e.date).toISOString().slice(0,10).split("-").reverse().join(".");return c.a.createElement("a",{key:t,href:e.url},c.a.createElement("div",{className:"episode-container"},c.a.createElement("img",{className:"episode-image",src:e.image,alt:e.title}),c.a.createElement("div",{className:"episode-information"},c.a.createElement("h3",null,e.title),c.a.createElement("p",null,a))))}},{key:"renderShowEpisodes",value:function(e){var t=this;return e?c.a.createElement(c.a.Fragment,null,c.a.createElement("h2",null,"Latest Episodes"),c.a.createElement("div",{className:"episode-cards"},e.map((function(e){return t.renderShowEpisode(e)})))):null}},{key:"componentDidMount",value:function(){this.fetchPlaylist()}},{key:"render",value:function(){var e=this.state.showEpisodes;return c.a.createElement("div",{className:"episode-list"},this.renderShowEpisodes(e))}}]),a}(r.Component)),Ee=(a(83),function(e){Object(F.a)(a,e);var t=Object(R.a)(a);function a(){var e;Object(W.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={show:null},e}return Object(B.a)(a,[{key:"parseShow",value:function(e){return e?{description:e.Description,showCover:{alternativeText:e.ShowCover.alternativeText,caption:e.ShowCover.caption,url:e.ShowCover.url},title:e.Title,showLinks:{mixcloud:e.ShowLink.mixcloud,spotify:e.ShowLink.spotify,itunes:e.ShowLink.itunes,castbox:e.ShowLink.castbox,facebook:e.ShowLink.facebook,vk:e.ShowLink.vk,instagram:e.ShowLink.instagram,telegram:e.ShowLink.telegram}}:null}},{key:"fetchShow",value:function(){var e=this,t=this.props.slug;fetch("".concat(fe,"/shows?Slug=").concat(t)).then((function(e){return e.json()})).then((function(t){return e.parseShow(t[0])})).then((function(t){return e.setState({show:t})}))}},{key:"componentDidMount",value:function(){this.fetchShow()}},{key:"render",value:function(){var e=this.state.show,t=this.props.slug,a=e?e.showCover.url:"";return e?c.a.createElement("article",{className:"show"},c.a.createElement("div",{className:"show-description"},c.a.createElement("div",{className:"information"},c.a.createElement("h1",null,e.title),c.a.createElement("p",null,e.description),c.a.createElement(I,{socialLinks:e.showLinks})),c.a.createElement("div",{className:"show-cover"},c.a.createElement("img",{src:a,loading:"lazy",alt:e.showCover.alternativeText}))),c.a.createElement(ve,{slug:t})):null}}]),a}(r.Component)),ke=(a(84),function(e){Object(F.a)(a,e);var t=Object(R.a)(a);function a(){var e;Object(W.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state={about:null},e}return Object(B.a)(a,[{key:"parseAbout",value:function(e){return e?{title:e.Title,description:e.Content,aboutCover:{alternativeText:e.Image.alternativeText,caption:e.Image.caption,url:e.Image.url}}:null}},{key:"fetchAbout",value:function(){var e=this;fetch("".concat(fe,"/about")).then((function(e){return e.json()})).then((function(t){return e.parseAbout(t)})).then((function(t){return e.setState({about:t})}))}},{key:"componentDidMount",value:function(){this.fetchAbout()}},{key:"render",value:function(){var e=this.state.about,t=e?e.aboutCover.url:"";return e?c.a.createElement("article",{className:"about"},c.a.createElement("div",{className:"information"},c.a.createElement("h1",null,e.title),c.a.createElement("p",null,e.description)),c.a.createElement("div",{className:"image"},c.a.createElement("img",{src:t,loading:"lazy",alt:e.aboutCover.alternativeText}))):null}}]),a}(r.Component)),we=a(60),be=a(18),ge=a.n(be);a(86);var Se,Ne,je=function(e){var t=e.showline,a=t.title,n=t.description,r=t.link,i=t.startTime,l=t.endTime,o="".concat(i.slice(0,5)," - ").concat(l.slice(0,5)),s=r||"#";return c.a.createElement("a",{href:s},c.a.createElement("div",{className:"show-title-container"},c.a.createElement("div",{className:"show-date"},c.a.createElement("p",null,o)),c.a.createElement("div",{className:"show-title"},c.a.createElement("p",null,a)),c.a.createElement("div",{className:"show-desc"},c.a.createElement("p",null,n))))};a(87);!function(e){e[e.Monday=0]="Monday",e[e.Tuesday=1]="Tuesday",e[e.Wednesday=2]="Wednesday",e[e.Thursday=3]="Thursday",e[e.Friday=4]="Friday",e[e.Saturday=5]="Saturday",e[e.Sunday=6]="Sunday"}(Se||(Se={})),function(e){e.SingleTime="SingleTime",e.Daily="Daily",e.Weekly="Weekly",e.BiWeekly="BiWeekly",e.EveryThirdWeek="Every3rdWeek",e.Monthly="Monthly"}(Ne||(Ne={}));var Oe=new Map([["Monday",Se.Monday],["Tuesday",Se.Tuesday],["Wednesday",Se.Wednesday],["Thursday",Se.Thursday],["Friday",Se.Friday],["Saturday",Se.Saturday],["Sunday",Se.Sunday]]),Te=["MON","TUE","WED","THU","FRI","SAT","SUN"],Ce=function(e){Object(F.a)(a,e);var t=Object(R.a)(a);function a(){var e;Object(W.a)(this,a);for(var n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).state={schedule:[[],[],[],[],[],[],[]],selectedDay:ge()().isoWeekday()-1},e.scheduleShowlineBuilder=function(e){return c.a.createElement(je,{showline:e})},e.selectDay=function(t){e.setState({selectedDay:t})},e.renderButtons=function(){var t=e.state.selectedDay;return Te.map((function(a,n){return c.a.createElement("button",{className:"schedule-day-button ".concat(t===n?"active":""),onClick:function(){return e.selectDay(n)}},a)}))},e.renderDailySchedule=function(){var t=e.state,a=t.schedule,n=t.selectedDay;return a[n].length?a[n].map((function(t){return e.scheduleShowlineBuilder(t)})):[]},e}return Object(B.a)(a,[{key:"componentDidMount",value:function(){var e=Object(q.a)(J.a.mark((function e(){return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.fetchSchedules();case 2:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"fetchSchedules",value:function(){var e=Object(q.a)(J.a.mark((function e(){var t=this;return J.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(fe,"/schedules")).then((function(e){return e.json()})).then((function(e){var a;return(a=[]).concat.apply(a,Object(we.a)(e.map((function(e){return t.parseScheduleLine(e)}))))})).then((function(e){return t.organizeSchedule(e)}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"parseScheduleLine",value:function(e){return e.OnAirDateTime.map((function(t){for(var a=[],n=0,r=Object.entries(t);n<r.length;n++){var c=Object(H.a)(r[n],2),i=c[0],l=c[1],o=Oe.get(i);l&&void 0!==o&&a.push(o)}return{title:e.Title,description:e.Description,type:e.Type,hide:e.Hide,link:e.Link,startDate:t.StartDate,startTime:t.StartTime,endDate:t.EndDate,endTime:t.EndTime,periodicity:t.Periodicity,weekdays:a}}))}},{key:"organizeSchedule",value:function(e){for(var t=this,a=[],n=function(n){a[n]=[],e.forEach((function(e){t.shouldShowBeOnAir(e,n)&&a[n].push(e)})),a[n].sort(t.sortShowsByDate)},r=Se.Monday;r<=Se.Sunday;r++)n(r);this.setState({schedule:a})}},{key:"sortShowsByDate",value:function(e,t){return+e.startTime.slice(0,2)-+t.startTime.slice(0,2)}},{key:"shouldShowBeOnAir",value:function(e,t){if(e.hide)return!1;var a=ge()(e.startDate),n=ge()().add(ge()().isoWeekday()-t+1,"days"),r=+(ge()().week()-a.week());switch(e.periodicity){case Ne.Daily:case Ne.Weekly:return e.weekdays.includes(t);case Ne.BiWeekly:return e.weekdays.includes(t)&&r%2===0;case Ne.EveryThirdWeek:return e.weekdays.includes(t)&&r%3===0;case Ne.SingleTime:return a.startOf("day").isSame(n.startOf("day"));default:return!1}}},{key:"render",value:function(){return c.a.createElement("div",{className:"schedule-container"},c.a.createElement("div",{className:"schedule-headline-container"},c.a.createElement("div",{className:"schedule-title"},c.a.createElement("p",null,"SCHEDULE")),c.a.createElement("div",{className:"schedule-day"},this.renderButtons())),c.a.createElement("div",null,this.renderDailySchedule()))}}]),a}(r.Component);a(88);var xe=Object(s.f)((function(){return c.a.createElement(s.c,null,c.a.createElement(s.a,{exact:!0,path:"/",component:Ce}),c.a.createElement(s.a,{exact:!0,path:"/schedule",component:Ce}),c.a.createElement(s.a,{exact:!0,path:"/shows",component:ye}),c.a.createElement(s.a,{path:"".concat("/shows","/:slug"),component:function(e){return c.a.createElement(Ee,{slug:e.match.params.slug})}}),c.a.createElement(s.a,{exact:!0,path:"/news",component:function(){return c.a.createElement("div",null,"/news")}}),c.a.createElement(s.a,{exact:!0,path:"/about",component:ke}))}));a(89);var De=Object(s.f)((function(){return c.a.createElement("main",null,c.a.createElement(de,null),c.a.createElement(s.c,null,c.a.createElement(s.a,{exact:!0,path:"/",render:function(e){return c.a.createElement(ie,Object.assign({},e,{playerType:A.Main}))}})),c.a.createElement(xe,null))})),Me=a(59),Pe=a.n(Me),Le=(a(95),function(e){Object(F.a)(a,e);var t=Object(R.a)(a);function a(){var e;Object(W.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).state=Q,e.subscription=null,e}return Object(B.a)(a,[{key:"componentDidMount",value:function(){this.subscribeOnPlayerStateChange()}},{key:"subscribeOnPlayerStateChange",value:function(){var e=this;this.subscription=X.subscribeOnPlayerStateChanges((function(t){return e.setState(t)}))}},{key:"componentWillUnmount",value:function(){var e;null===(e=this.subscription)||void 0===e||e.unsubscribe()}},{key:"render",value:function(){var e=this.state,t=e.playing,a=e.muted,n=e.volume;return c.a.createElement("div",{className:"audio"},c.a.createElement(Pe.a,{url:"https://radioplato.radioca.st/stream",playing:t,muted:a,volume:n,config:{file:{forceAudio:!0}}}))}}]),a}(r.Component));a(96);var Ae=function(){return c.a.createElement(o.a,null,c.a.createElement(oe,null),c.a.createElement(De,null),c.a.createElement(Le,null))};l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(Ae,null)),document.getElementById("root"))}},[[61,1,2]]]);
//# sourceMappingURL=main.c1e73d09.chunk.js.map